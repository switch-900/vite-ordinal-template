<!DOCTYPE html>
<html lang="en">
<head>
  <title>vite ordinal template</title>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
  <script src="/content/5d82695b820a676ba23cda5390249f295eacb1a97e4df20fc02eaa501bd20eedi0"></script>
  <script src="/content/609b117277f1e9c9f27f358fe02db34e13d08915bbcea18770dc36f5f3afcbb2i2"></script>
  <link rel="icon" href="/content/cfab194b924f7785c6e453728e1c264b89b74843633278cda3ad3f57576c1e93i0">
  <script type="module" crossorigin>import{jsx as t,jsxs as x,Fragment as z}from"react/jsx-runtime";import Y,{createContext as W,useState as T,useCallback as R,useContext as q,useRef as j,useEffect as U,useMemo as Q,Suspense as K}from"react";import ee from"react-dom/client";import{useThree as te,Canvas as V}from"@react-three/fiber";import{Perf as ne}from"r3f-perf";import{OrthographicCamera as re,PerspectiveCamera as oe,CameraControls as _,Environment as F,Grid as se,TransformControls as ie}from"@react-three/drei";import{boxelGeometry as ae}from"/content/c0dec9591190449efc84e972ebc6b96e98a6ce971faa79357e0e688167934131i0";import{useControls as G,folder as P,button as v,Leva as ce}from"leva";import le from"three-custom-shader-material";import*as C from"three";import{Geometry as de,Base as ue,Addition as me,Subtraction as he,Intersection as pe}from"@react-three/csg";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))p(m);new MutationObserver(m=>{for(const l of m)if(l.type==="childList")for(const n of l.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&p(n)}).observe(document,{childList:!0,subtree:!0});function s(m){const l={};return m.integrity&&(l.integrity=m.integrity),m.referrerPolicy&&(l.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?l.credentials="include":m.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function p(m){if(m.ep)return;m.ep=!0;const l=s(m);fetch(m.href,l)}})();class fe{constructor(){this.history=[],this.currentIndex=-1,this.maxHistorySize=50}saveState(a,s="Unknown Action"){this.currentIndex<this.history.length-1&&(this.history=this.history.slice(0,this.currentIndex+1)),this.history.push({state:JSON.parse(JSON.stringify(a)),description:s,timestamp:Date.now()}),this.history.length>this.maxHistorySize?this.history.shift():this.currentIndex++}undo(){return this.canUndo()?(this.currentIndex--,this.history[this.currentIndex]):null}redo(){return this.canRedo()?(this.currentIndex++,this.history[this.currentIndex]):null}canUndo(){return this.currentIndex>0}canRedo(){return this.currentIndex<this.history.length-1}getCurrentInfo(){return this.currentIndex>=0&&this.currentIndex<this.history.length?this.history[this.currentIndex]:null}getUndoInfo(){return this.canUndo()?this.history[this.currentIndex-1]:null}getRedoInfo(){return this.canRedo()?this.history[this.currentIndex+1]:null}clear(){this.history=[],this.currentIndex=-1}}const ge=new fe,H=W(),X={objects:[],selectedIds:[],selectedObjectId:null,viewMode:"3d",currentTool:"Line",transformMode:"translate",snapToGrid:!0,gridSize:.5,showGrid:!0,layers:[{id:"default",name:"Default Layer",visible:!0,locked:!1,color:"#3b82f6"}],groups:[]},ye=({children:o})=>{const[a,s]=T(X),p=R(l=>{s(typeof l=="function"?n=>({...n,...l(n)}):n=>({...n,...l}))},[]),m={...a,setSceneState:p};return t(H.Provider,{value:m,children:o})},be=(o="Action")=>{},D=()=>{const o=q(H);if(!o)throw new Error("useScene must be used within a SceneProvider");return o};ge.saveState(X,"Initial State");const A=()=>{const{setSceneState:o}=D(),a=R(c=>{c.layerId||(c.layerId="default"),be(`Add ${c.type||c.geometry}`),o(d=>({objects:[...d.objects,c]}))},[o]),s=R(c=>{o({selectedIds:c,selectedObjectId:c.length===1?c[0]:null})},[o]),p=R(c=>{o(d=>{const b=d.selectedIds.includes(c)?d.selectedIds.filter(y=>y!==c):[...d.selectedIds,c];return{selectedIds:b,selectedObjectId:b.length===1?b[0]:null}})},[o]),m=R(()=>{o({selectedIds:[],selectedObjectId:null})},[o]),l=R((c,d)=>{o(g=>({objects:g.objects.map(b=>b.id===c?{...b,...d}:b)}))},[o]),n=R(c=>{o(d=>({objects:d.objects.filter(g=>g.id!==c),selectedIds:d.selectedIds.filter(g=>g!==c),selectedObjectId:d.selectedObjectId===c?null:d.selectedObjectId}))},[o]);return{addObject:a,selectObjects:s,toggleObjectSelection:p,clearSelection:m,updateObject:l,deleteObject:n}},we=()=>{const o=j(),a=j(),{viewMode:s}=D();return x(z,{children:[t(re,{ref:o,makeDefault:s==="2d",position:[0,10,0],rotation:[-Math.PI/2,0,0],zoom:50}),t(oe,{ref:a,makeDefault:s==="3d",fov:45,position:[5,5,5]}),s==="3d"&&t(_,{makeDefault:!1})]})},xe=()=>{const{selectedIds:o,viewMode:a,setSceneState:s}=D(),{deleteObject:p,clearSelection:m}=A();U(()=>{const l=n=>{if(!(a!=="3d"||n.target.tagName==="INPUT"||n.target.tagName==="TEXTAREA"))switch(n.key.toLowerCase()){case"z":(n.ctrlKey||n.metaKey)&&(n.preventDefault(),n.shiftKey?console.log("Redo - temporarily disabled during migration"):console.log("Undo - temporarily disabled during migration"));break;case"y":(n.ctrlKey||n.metaKey)&&(n.preventDefault(),console.log("Redo - temporarily disabled during migration"));break;case"delete":case"backspace":n.preventDefault(),o.forEach(c=>p(c));break;case"escape":n.preventDefault(),m();break;case"g":!n.ctrlKey&&!n.metaKey&&(n.preventDefault(),s({transformMode:"translate"}));break;case"r":!n.ctrlKey&&!n.metaKey&&(n.preventDefault(),s({transformMode:"rotate"}));break;case"s":!n.ctrlKey&&!n.metaKey&&(n.preventDefault(),s({transformMode:"scale"}));break;case"h":n.preventDefault(),s(c=>({showGrid:!c.showGrid}));break;case"tab":n.preventDefault(),s(c=>({snapToGrid:!c.snapToGrid}));break;case"1":n.preventDefault(),s({viewMode:"3d"});break;case"2":n.preventDefault(),s({viewMode:"2d"});break}};return window.addEventListener("keydown",l),()=>window.removeEventListener("keydown",l)},[o,a])},ve=()=>t(F,{environmentIntensity:.75,files:"/content/8c4ea8f9fafef081345ba8a72c08efed2373d0ba33ac92aca5f043071fc42909i0"}),Se=()=>{const[{scale:o,angle:a}]=G("edit boxel",()=>({scale:{value:1,min:.1,max:2,step:.01},angle:{value:.1,min:.01,max:.99,step:.01}}),{color:"#ff9900"});return t("mesh",{geometry:ae,scale:o,children:t(le,{baseMaterial:C.MeshStandardMaterial,flatShading:!0,transparent:!0,uniforms:{time:{value:0}},vertexShader:`
          
            // adjust shape here when instancing
            attribute float angle;
            
            varying vec3 vPos;
            varying vec3 vNormal;

            void main() {
            csm_Position += normal * ${a-.2+.01} * 0.5; // test mode
            vPos = csm_Position;
            vNormal = normal;
        }
            `,fragmentShader:`
            varying vec3 vPos;
            varying vec3 vNormal;

            uniform float time;

            void main() {
                csm_DiffuseColor = vec4(1.8, 0.5, 0., 1.);
            }
            `},a)})},Ie=()=>{const o=j();return U(()=>{window.gridFloor=o.current},[]),t(se,{gridSize:[1,1],cellSize:.1,cellThickness:1,cellColor:"#6f6f6f",sectionSize:1,sectionThickness:1.5,sectionColor:"#ff6600",fadeDistance:200,fadeStrength:50,followCamera:!0,infiniteGrid:!0,position:[0,-.5,0],ref:o})},Oe=()=>{const{scene:o,camera:a,gl:s}=te(),{currentTool:p}=D(),[m,l]=T([]),[n,c]=T(!1),d=j(null),g=j(null),b=i=>{switch(i.stopPropagation(),c(!0),p){case"Line":case"Path":y(i);break;case"Rectangle":N(i);break}},y=i=>{const h=[i.point.clone()],f=new C.LineBasicMaterial({color:"orange"}),O=new C.BufferGeometry().setFromPoints(h),S=new C.Line(O,f);o.add(S),d.current={line:S,points:h}},N=i=>{const h=i.point.clone(),f=new C.LineBasicMaterial({color:"orange"}),O=new C.BufferGeometry,S=new C.LineLoop(O,f);o.add(S),g.current={line:S,startPoint:h}},w=i=>{if(n)switch(i.stopPropagation(),p){case"Line":case"Path":k(i);break;case"Rectangle":I(i);break}},k=i=>{if(!d.current)return;const h=i.point.clone();if(p==="Path")d.current.points.push(h),d.current.line.geometry.setFromPoints(d.current.points);else{const f=[d.current.points[0],h];d.current.line.geometry.setFromPoints(f)}},I=i=>{if(!g.current)return;const h=i.point.clone(),f=g.current.startPoint,O=[new C.Vector3(f.x,f.y,f.z),new C.Vector3(h.x,f.y,f.z),new C.Vector3(h.x,h.y,f.z),new C.Vector3(f.x,h.y,f.z)];g.current.line.geometry.setFromPoints(O)},e=i=>{n&&(i.stopPropagation(),c(!1),d.current&&(l(h=>[...h,d.current.line]),d.current=null),g.current&&(l(h=>[...h,g.current.line]),g.current=null))};return x(z,{children:[t("gridHelper",{args:[20,20,"#444","#222"],rotation:[0,0,0]}),x("mesh",{rotation:[-Math.PI/2,0,0],position:[0,0,0],onPointerDown:b,onPointerMove:w,onPointerUp:e,children:[t("planeGeometry",{args:[100,100]}),t("meshBasicMaterial",{visible:!1})]})]})},Ce=[{name:"Line",icon:"📏"},{name:"Rectangle",icon:"⬛"},{name:"Polygon",icon:"🔺"},{name:"Path",icon:"✏️"},{name:"Select",icon:"🖱️"}],Me=()=>{const{currentTool:o,setSceneState:a}=D();return t("div",{className:"absolute top-2 right-2 z-10 flex flex-col space-y-2 bg-gray-900 bg-opacity-80 p-2 rounded shadow",children:Ce.map(s=>x("button",{className:`px-2 py-1 rounded flex items-center space-x-2 ${o===s.name?"bg-orange-500 text-white":"bg-gray-700 text-gray-200"}`,onClick:()=>a({currentTool:s.name}),children:[t("span",{children:s.icon}),t("span",{children:s.name})]},s.name))})},ke=({selectedMesh:o})=>o?t(ie,{object:o,mode:"translate",showX:!0,showY:!0,showZ:!0,space:"world",size:.8}):null,Pe=()=>{const{objects:o,selectedObjectId:a,selectedIds:s,layers:p,groups:m=[]}=D(),{selectObjects:l,toggleObjectSelection:n,clearSelection:c}=A(),d=j({}),g=o.filter(e=>{const i=p.find(f=>f.id===e.layerId),h=i?i.visible:!0;if(e.groupId){const f=m.find(S=>S.id===e.groupId),O=f?f.visible:!0;return h&&O}return h}),b=(e,i)=>{i.stopPropagation(),i.ctrlKey||i.metaKey?n(e):l([e])},y=e=>{e.target===e.currentTarget&&c()},N=()=>a?d.current[a]:null,w=(e,i)=>{switch(e){case"box":return t("boxGeometry",{args:i});case"sphere":return t("sphereGeometry",{args:i});case"cylinder":return t("cylinderGeometry",{args:i});case"plane":return t("planeGeometry",{args:i});case"cone":return t("coneGeometry",{args:i});default:return t("boxGeometry",{args:[1,1,1]})}},k=e=>{const i=g.filter(M=>e.sourceObjects.includes(M.id));if(i.length<2)return null;const[h,f,...O]=i,S=M=>t("mesh",{position:M.position,rotation:M.rotation,scale:M.scale,children:w(M.geometry,M.geometryArgs)});return x(de,{children:[t(ue,{children:S(h)}),e.operation==="union"&&t(me,{children:S(f)}),e.operation==="subtract"&&t(he,{children:S(f)}),e.operation==="intersect"&&t(pe,{children:S(f)})]})},I=(e,i)=>t("meshStandardMaterial",{color:i?"#ffaa00":e.color,metalness:e.metalness||.1,roughness:e.roughness||.8,transparent:i||e.opacity!==void 0&&e.opacity<1,opacity:i?.8:e.opacity||1,emissive:e.emissive||"#000000",emissiveIntensity:e.emissiveIntensity||0});return x("group",{onClick:y,children:[g.map(e=>{if(!e.visible)return null;const i=s.includes(e.id);return e.type==="boolean"?x("mesh",{ref:h=>{h&&(d.current[e.id]=h)},position:e.position,rotation:e.rotation,scale:e.scale,onClick:h=>b(e.id,h),children:[k(e),I(e.material,i)]},e.id):x("mesh",{ref:h=>{h&&(d.current[e.id]=h)},position:e.position,rotation:e.rotation,scale:e.scale,onClick:h=>b(e.id,h),children:[w(e.geometry,e.geometryArgs),I(e.material,i)]},e.id)}),t(ke,{selectedMesh:N()})]})},De=()=>x("div",{className:"pointer-events-none gloww absolute flex flex-col justify-center text-orange-500 p-2 px-3 text-xl",children:[x("div",{className:"flex",children:[t("div",{className:"w-6 h-6 min-w-6 bg-orange-400 mt-1.5 mr-1.5 rounded-sm"}),t("span",{className:"opacity-80 pr-1.5 pt-1",children:t("i",{children:"the"})}),' "',t("span",{className:"text-orange-400 text-3xl hover:text-lime-400 pointer-events-auto cursor-crosshair",children:"boxel"}),'"']}),x("div",{className:"text-md w-[200px] flex flex-col",children:[x("div",{children:["a ",t("span",{className:"text-orange-300",children:"faceted cube"})," with multiple shapes, all in one geometry!"]}),t("div",{className:"text-sm text-orange-300 pt-2 opacity-80",children:"the 'angle' shader attribute moves the vertices along their normals"})]})]}),Ge=({onLoadInViewer:o})=>{var h,f,O,S,M,B;const{objects:a,selectedObjectId:s,selectedIds:p,viewMode:m,transformMode:l,snapToGrid:n,gridSize:c,showGrid:d,layers:g,setSceneState:b}=D(),{addObject:y,selectObjects:N,updateObject:w,deleteObject:k,clearSelection:I}=A(),e=a.find(r=>r.id===s),i=r=>{const u=`${r}_${Date.now()}`,$=[0,0,0],E=[0,0,0],Z=[1,1,1];let L;switch(r){case"box":L=[1,1,1];break;case"sphere":L=[.5,32,16];break;case"cylinder":L=[.5,.5,1,32];break;case"plane":L=[2,2];break;case"cone":L=[.5,1,32];break;default:L=[1,1,1]}const J={id:u,name:`${r}_${Date.now()}`,type:"mesh",geometry:r,geometryArgs:L,material:{type:"standard",color:"#ff6600",metalness:.1,roughness:.7},position:$,rotation:E,scale:Z,visible:!0,locked:!1};y(J)};return G({"View Controls":P({"View Mode":{value:m,options:{"3D":"3d","2D Sketch":"2d"},onChange:r=>b({viewMode:r})},"Show Grid":{value:d,onChange:r=>b({showGrid:r})},"Grid Size":{value:c,min:.1,max:5,step:.1,onChange:r=>b({gridSize:r})},"Snap to Grid":{value:n,onChange:r=>b({snapToGrid:r})}}),Create:P({"Add Cube":v(()=>i("box")),"Add Sphere":v(()=>i("sphere")),"Add Cylinder":v(()=>i("cylinder")),"Add Plane":v(()=>i("plane")),"Add Cone":v(()=>i("cone"))}),Modify:P({"Transform Mode":{value:l,options:{Move:"translate",Rotate:"rotate",Scale:"scale"},onChange:r=>b({transformMode:r})},"Clear Selection":v(()=>I()),"Delete Selected":v(()=>{p.forEach(r=>k(r))})}),Selection:P({"Selected Objects":`${p.length} object(s)`,"Selected ID":s||"None"})}),G("Object Properties",e?{Name:{value:e.name||"",onChange:r=>w(s,{name:r})},Visible:{value:e.visible??!0,onChange:r=>w(s,{visible:r})},Position:P({X:{value:e.position[0],min:-10,max:10,step:.1,onChange:r=>{const u=[...e.position];u[0]=r,w(s,{position:u})}},Y:{value:e.position[1],min:-10,max:10,step:.1,onChange:r=>{const u=[...e.position];u[1]=r,w(s,{position:u})}},Z:{value:e.position[2],min:-10,max:10,step:.1,onChange:r=>{const u=[...e.position];u[2]=r,w(s,{position:u})}}}),Rotation:P({"X°":{value:e.rotation[0]*(180/Math.PI),min:-180,max:180,step:1,onChange:r=>{const u=[...e.rotation];u[0]=r*(Math.PI/180),w(s,{rotation:u})}},"Y°":{value:e.rotation[1]*(180/Math.PI),min:-180,max:180,step:1,onChange:r=>{const u=[...e.rotation];u[1]=r*(Math.PI/180),w(s,{rotation:u})}},"Z°":{value:e.rotation[2]*(180/Math.PI),min:-180,max:180,step:1,onChange:r=>{const u=[...e.rotation];u[2]=r*(Math.PI/180),w(s,{rotation:u})}}}),Scale:P({X:{value:e.scale[0],min:.1,max:5,step:.1,onChange:r=>{const u=[...e.scale];u[0]=r,w(s,{scale:u})}},Y:{value:e.scale[1],min:.1,max:5,step:.1,onChange:r=>{const u=[...e.scale];u[1]=r,w(s,{scale:u})}},Z:{value:e.scale[2],min:.1,max:5,step:.1,onChange:r=>{const u=[...e.scale];u[2]=r,w(s,{scale:u})}}})}:{"No Object Selected":"Select an object to edit properties"},{collapsed:!e}),G("Material",e?{Color:{value:((h=e.material)==null?void 0:h.color)||"#ff6600",onChange:r=>w(s,{material:{...e.material,color:r}})},Metalness:{value:((f=e.material)==null?void 0:f.metalness)||.1,min:0,max:1,step:.01,onChange:r=>w(s,{material:{...e.material,metalness:r}})},Roughness:{value:((O=e.material)==null?void 0:O.roughness)||.7,min:0,max:1,step:.01,onChange:r=>w(s,{material:{...e.material,roughness:r}})},Opacity:{value:((S=e.material)==null?void 0:S.opacity)||1,min:0,max:1,step:.01,onChange:r=>w(s,{material:{...e.material,opacity:r}})},Emissive:{value:((M=e.material)==null?void 0:M.emissive)||"#000000",onChange:r=>w(s,{material:{...e.material,emissive:r}})},"Emissive Intensity":{value:((B=e.material)==null?void 0:B.emissiveIntensity)||0,min:0,max:2,step:.1,onChange:r=>w(s,{material:{...e.material,emissiveIntensity:r}})}}:{"No Material":"Select an object to edit material"},{collapsed:!e}),G("Scene Hierarchy",{"Total Objects":a.length,"Visible Objects":a.filter(r=>r.visible).length,"Selected Count":p.length,"Clear All":v(()=>{a.forEach(r=>k(r.id))})}),G("Boolean Operations",p.length>=2?{Union:v(()=>{const u={id:`union_${Date.now()}`,name:`Union_${Date.now()}`,type:"boolean",operation:"union",sourceObjects:[...p],position:[0,0,0],rotation:[0,0,0],scale:[1,1,1],material:{type:"standard",color:"#00ff00",metalness:.1,roughness:.7},visible:!0,locked:!1};y(u),I()}),Subtract:v(()=>{const u={id:`subtract_${Date.now()}`,name:`Subtract_${Date.now()}`,type:"boolean",operation:"subtract",sourceObjects:[...p],position:[0,0,0],rotation:[0,0,0],scale:[1,1,1],material:{type:"standard",color:"#ff0000",metalness:.1,roughness:.7},visible:!0,locked:!1};y(u),I()}),Intersect:v(()=>{const u={id:`intersect_${Date.now()}`,name:`Intersect_${Date.now()}`,type:"boolean",operation:"intersect",sourceObjects:[...p],position:[0,0,0],rotation:[0,0,0],scale:[1,1,1],material:{type:"standard",color:"#0000ff",metalness:.1,roughness:.7},visible:!0,locked:!1};y(u),I()})}:{Info:"Select 2+ objects for boolean operations"},{collapsed:p.length<2}),G("Export & Scene",{"Export GLB":v(()=>{const r={objects:a,layers:g,settings:{viewMode:m,showGrid:d,gridSize:c,snapToGrid:n},metadata:{created:new Date().toISOString(),version:"1.0.0",totalObjects:a.length}};if(o)o(r);else{const u=new Blob([JSON.stringify(r,null,2)],{type:"application/json"}),$=URL.createObjectURL(u),E=document.createElement("a");E.href=$,E.download=`scene_${Date.now()}.json`,E.click(),URL.revokeObjectURL($)}}),"Clear Scene":v(()=>{confirm("Are you sure you want to clear the entire scene?")&&(a.forEach(r=>k(r.id)),I())}),"Load in Viewer":v(()=>{const r={objects:a,layers:g,settings:{viewMode:m,showGrid:d,gridSize:c,snapToGrid:n},metadata:{created:new Date().toISOString(),version:"1.0.0",totalObjects:a.length}};o&&o(r)})}),null},Ne=()=>{const{objects:o,selectedIds:a,layers:s}=D(),{selectObjects:p,deleteObject:m,updateObject:l}=A();return G("Object Browser",Q(()=>{const n={};if(o.length===0)return n["No Objects"]="Create objects to see them here",n;const c={};return o.forEach(d=>{const g=d.layerId||"default",b=s.find(N=>N.id===g),y=b?b.name:"Default Layer";c[y]||(c[y]=[]),c[y].push(d)}),Object.keys(c).forEach(d=>{const g=c[d],b={};g.forEach(y=>{const w=a.includes(y.id)?"● ":"○ ",k=y.visible?"👁 ":"🙈 ";b[`${w}${k}${y.name||y.id}`]=P({Select:v(()=>p([y.id])),Visible:{value:y.visible??!0,onChange:I=>l(y.id,{visible:I})},Delete:v(()=>m(y.id)),Type:y.geometry||y.type||"Unknown",Layer:d})}),n[`📁 ${d} (${g.length})`]=P(b)}),n},[o,a,s,p,m,l])),null},Le=({sceneData:o,onBackToBuilder:a})=>{const s=()=>{if(!o)return null;if(typeof o=="string")try{return JSON.parse(o).map((n,c)=>x("mesh",{position:n.position,rotation:n.rotation,scale:n.scale,children:[p(n.geometry,n.args),m(n.material)]},c))}catch(l){return console.error("Failed to parse scene data:",l),null}return null},p=(l,n)=>{switch(l){case"box":return t("boxGeometry",{args:n});case"sphere":return t("sphereGeometry",{args:n});case"cylinder":return t("cylinderGeometry",{args:n});case"plane":return t("planeGeometry",{args:n});case"cone":return t("coneGeometry",{args:n});default:return t("boxGeometry",{args:[1,1,1]})}},m=l=>t("meshStandardMaterial",{color:l.color,metalness:l.metalness,roughness:l.roughness});return x("div",{className:"w-full h-full",children:[x("div",{className:"absolute top-2 left-2 z-10 bg-gray-900 bg-opacity-80 text-white p-2 rounded",children:[t("h3",{className:"text-sm font-bold",children:"3D Viewer"}),t("p",{className:"text-xs text-gray-300",children:"Orbit • Pan • Zoom"}),a&&t("button",{className:"mt-2 px-2 py-1 bg-orange-600 text-white rounded text-xs hover:bg-orange-700",onClick:a,children:"← Back to Builder"})]}),x(V,{camera:{position:[5,5,5],fov:45},dpr:1,children:[t("color",{attach:"background",args:[.1,.1,.12]}),x(K,{fallback:null,children:[t(F,{preset:"city",environmentIntensity:.3}),t("ambientLight",{intensity:.5}),t("directionalLight",{position:[10,10,5],intensity:1}),s(),t(_,{makeDefault:!0})]})]})]})};function Re(){const[o,a]=T("builder"),[s,p]=T(null);xe();const m=()=>{const{viewMode:l,setSceneState:n}=D();return x(z,{children:[l==="2d"&&t(Me,{}),t(Ge,{onLoadInViewer:c=>{p(c),a("viewer")}}),t(Ne,{}),x("div",{className:"absolute top-2 left-2 z-10 flex space-x-2",children:[t("button",{onClick:()=>n({viewMode:"2d"}),className:"px-2 py-1 bg-gray-800 text-white rounded",children:"2D"}),t("button",{onClick:()=>n({viewMode:"3d"}),className:"px-2 py-1 bg-gray-800 text-white rounded",children:"3D"})]}),x(V,{dpr:1,children:[t(we,{}),t("color",{attach:"background",args:[.02,.02,.022]}),t(K,{children:l==="2d"?t(Oe,{}):x(z,{children:[t(ve,{}),t(Pe,{}),t(Se,{}),t(Ie,{}),window.innerWidth<300?null:t(ne,{position:"bottom-left"})]})})]})]})};return o==="viewer"?t(Le,{sceneData:s,onBackToBuilder:()=>a("builder")}):x("div",{className:"w-full h-full flex flex-col overflow-hidden",children:[x("div",{className:"absolute top-2 left-1/2 transform -translate-x-1/2 z-20 flex space-x-2",children:[t("button",{onClick:()=>a("builder"),className:`px-3 py-1 rounded ${o==="builder"?"bg-orange-600 text-white":"bg-gray-800 text-gray-300"}`,children:"Builder"}),t("button",{onClick:()=>a("viewer"),className:`px-3 py-1 rounded ${o==="viewer"?"bg-orange-600 text-white":"bg-gray-800 text-gray-300"}`,children:"Viewer"})]}),t(m,{}),t(ce,{hidden:window.innerWidth<300}),t(De,{})]})}ee.createRoot(document.getElementById("root")).render(t(Y.StrictMode,{children:t(ye,{children:t(Re,{})})}));
</script>
  <style rel="stylesheet">@font-face{font-family:Font;src:url(/content/74eed71c46430c38e056ef1bc69ad2c521293a8941d2177b52e7d447b42d5522i0)}html,body,#root{margin:0;width:100%;height:100%;background:#333;font-family:Font,serif}.gloww{text-shadow:0 0 55px #ff9900,0 0 32px rgba(255,119,0,.7),0 0 7px #000,0 0 16px #000,0 0 3px #bf00ff}
</style>
</head>
<body><div id="root"></div></body>
</html>
